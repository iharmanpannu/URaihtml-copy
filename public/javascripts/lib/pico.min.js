pico={unpack_cascade:function(t){var r=new DataView(new ArrayBuffer(4)),n=8;r.setUint8(0,t[n+0]),r.setUint8(1,t[n+1]),r.setUint8(2,t[n+2]),r.setUint8(3,t[n+3]);var h=r.getInt32(0,!0);n+=4,r.setUint8(0,t[n+0]),r.setUint8(1,t[n+1]),r.setUint8(2,t[n+2]),r.setUint8(3,t[n+3]);var c=r.getInt32(0,!0);n+=4;for(var p=[],l=[],U=[],a=0;a<c;++a){var e;for(Array.prototype.push.apply(p,[0,0,0,0]),Array.prototype.push.apply(p,t.slice(n,n+4*Math.pow(2,h)-4)),n=n+4*Math.pow(2,h)-4,e=0;e<Math.pow(2,h);++e)r.setUint8(0,t[n+0]),r.setUint8(1,t[n+1]),r.setUint8(2,t[n+2]),r.setUint8(3,t[n+3]),l.push(r.getFloat32(0,!0)),n+=4;r.setUint8(0,t[n+0]),r.setUint8(1,t[n+1]),r.setUint8(2,t[n+2]),r.setUint8(3,t[n+3]),U.push(r.getFloat32(0,!0)),n+=4}return p=new Int8Array(p),l=new Float32Array(l),U=new Float32Array(U),function(t,r,n,a,e){t*=256,r*=256;for(var i=0,o=0,s=Math.pow(2,h)>>0,f=0;f<c;++f){idx=1;for(var u=0;u<h;++u)idx=2*idx+(a[(t+p[i+4*idx+0]*n>>8)*e+(r+p[i+4*idx+1]*n>>8)]<=a[(t+p[i+4*idx+2]*n>>8)*e+(r+p[i+4*idx+3]*n>>8)]);if((o+=l[s*f+idx-s])<=U[f])return-1;i+=4*s}return o-U[c-1]}},run_cascade:function(t,r,n){for(var a=t.pixels,e=t.nrows,i=t.ncols,o=t.ldim,s=n.shiftfactor,f=n.minsize,u=n.maxsize,h=n.scalefactor,c=f,p=[];c<=u;){for(var l=Math.max(s*c,1)>>0,U=c/2+1>>0,x=U;x<=e-U;x+=l)for(var v=U;v<=i-U;v+=l){var d=r(x,v,c,a,o);0<d&&p.push([x,v,c,d])}c*=h}return p},cluster_detections:function(t,r){t=t.sort(function(t,r){return r[3]-t[3]});for(var n,a,e,i,o,s,f,u,h,c,p=new Array(t.length).fill(0),l=[],U=0;U<t.length;++U)if(0==p[U]){for(var x=0,v=0,d=0,m=0,w=0,y=U;y<t.length;++y)n=t[U],a=t[y],e=n[0],i=n[1],o=n[2],s=a[0],f=a[1],u=a[2],r<(h=Math.max(0,Math.min(e+o/2,s+u/2)-Math.max(e-o/2,s-u/2)))*(c=Math.max(0,Math.min(i+o/2,f+u/2)-Math.max(i-o/2,f-u/2)))/(o*o+u*u-h*c)&&(p[y]=1,x+=t[y][0],v+=t[y][1],d+=t[y][2],m+=t[y][3],w+=1);l.push([x/w,v/w,d/w,m])}return l},instantiate_detection_memory:function(t){for(var r=0,n=[],a=0;a<t;++a)n.push([]);return function(t){for(n[r]=t,r=(r+1)%n.length,t=[],a=0;a<n.length;++a)t=t.concat(n[a]);return t}}};